Fast-forward
 Dockerfile                                                                                                                                    |  1 +
 attached_assets/Pasted-obtv-admin-retail-dev-retail-docker-compose-logs-f-app-1-5-08-29-AM-express-serving-on-1755320957193_1755320957193.txt | 55 +++++++++++++++++++++++++++++++++++++++++++++++++++++++
 package-lock.json                                                                                                                             | 14 ++++++++++++++
 package.json                                                                                                                                  |  1 +
 replit.md                                                                                                                                     |  5 ++++-
 scripts/deploy.sh                                                                                                                             |  4 ++++
 scripts/seed-docker.js                                                                                                                        | 66 ++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
 scripts/seed-production.sh                                                                                                                    | 11 +++++++++++
 scripts/update.sh                                                                                                                             |  4 ++++
 9 files changed, 160 insertions(+), 1 deletion(-)
 create mode 100644 attached_assets/Pasted-obtv-admin-retail-dev-retail-docker-compose-logs-f-app-1-5-08-29-AM-express-serving-on-1755320957193_1755320957193.txt
 create mode 100644 scripts/seed-docker.js
 create mode 100755 scripts/seed-production.sh
obtv-admin@retail-dev:~/retail$ docker compose down
[+] Running 3/3
 ✔ Container retail-app-1       Removed                                                                                                                                                                                                                                                                                                                                                                                           0.3s
 ✔ Container retail-postgres-1  Removed                                                                                                                                                                                                                                                                                                                                                                                           0.3s
 ✔ Network retail_default       Removed                                                                                                                                                                                                                                                                                                                                                                                           0.3s
obtv-admin@retail-dev:~/retail$ docker-compose build --no-cache
[+] Building 46.1s (27/27) FINISHED
 => [internal] load local bake definitions                                                                                                                                                                                                                                                                                                                                                                                        0.0s
 => => reading from stdin 509B                                                                                                                                                                                                                                                                                                                                                                                                    0.0s
 => [internal] load build definition from Dockerfile                                                                                                                                                                                                                                                                                                                                                                              0.0s
 => => transferring dockerfile: 1.89kB                                                                                                                                                                                                                                                                                                                                                                                            0.0s
 => [internal] load metadata for docker.io/library/node:18-alpine                                                                                                                                                                                                                                                                                                                                                                 0.5s
 => [internal] load .dockerignore                                                                                                                                                                                                                                                                                                                                                                                                 0.0s
 => => transferring context: 1.17kB                                                                                                                                                                                                                                                                                                                                                                                               0.0s
 => CACHED [builder 1/6] FROM docker.io/library/node:18-alpine@sha256:8d6421d663b4c28fd3ebc498332f249011d118945588d0a35cb9bc4b8ca09d9e                                                                                                                                                                                                                                                                                            0.0s
 => [internal] load build context                                                                                                                                                                                                                                                                                                                                                                                                 0.0s
 => => transferring context: 379.79kB                                                                                                                                                                                                                                                                                                                                                                                             0.0s
 => CACHED [builder 2/6] WORKDIR /app                                                                                                                                                                                                                                                                                                                                                                                             0.0s
 => [production  2/15] RUN apk add --no-cache dumb-init                                                                                                                                                                                                                                                                                                                                                                           1.1s
 => [builder 3/6] COPY package*.json ./                                                                                                                                                                                                                                                                                                                                                                                           0.0s
 => [builder 4/6] RUN npm ci                                                                                                                                                                                                                                                                                                                                                                                                     17.2s
 => [production  3/15] RUN addgroup -g 1001 -S nodejs                                                                                                                                                                                                                                                                                                                                                                             0.3s
 => [production  4/15] RUN adduser -S nextjs -u 1001                                                                                                                                                                                                                                                                                                                                                                              0.3s
 => [production  5/15] WORKDIR /app                                                                                                                                                                                                                                                                                                                                                                                               0.0s
 => [production  6/15] COPY package*.json ./                                                                                                                                                                                                                                                                                                                                                                                      0.0s
 => [production  7/15] RUN npm ci && npm cache clean --force                                                                                                                                                                                                                                                                                                                                                                     18.3s
 => [builder 5/6] COPY . .                                                                                                                                                                                                                                                                                                                                                                                                        0.1s
 => [builder 6/6] RUN npx vite build && npx esbuild server/index.ts --platform=node --packages=external --bundle --format=esm --outdir=dist     && sed -i 's|import\.meta\.dirname|"/app/server"|g' dist/index.js                                                                                                                                                                                                                20.5s
 => [production  8/15] COPY --from=builder --chown=nextjs:nodejs /app/dist ./dist                                                                                                                                                                                                                                                                                                                                                 0.0s
 => [production  9/15] COPY --from=builder --chown=nextjs:nodejs /app/server ./server                                                                                                                                                                                                                                                                                                                                             0.0s
 => [production 10/15] COPY --from=builder --chown=nextjs:nodejs /app/server/vite-docker.ts ./server/vite.js                                                                                                                                                                                                                                                                                                                      0.0s
 => [production 11/15] COPY --from=builder --chown=nextjs:nodejs /app/dist/public ./server/public                                                                                                                                                                                                                                                                                                                                 0.0s
 => [production 12/15] COPY --from=builder --chown=nextjs:nodejs /app/shared ./shared                                                                                                                                                                                                                                                                                                                                             0.0s
 => [production 13/15] COPY --from=builder --chown=nextjs:nodejs /app/migrations ./migrations                                                                                                                                                                                                                                                                                                                                     0.0s
 => [production 14/15] COPY --from=builder --chown=nextjs:nodejs /app/scripts ./scripts                                                                                                                                                                                                                                                                                                                                           0.0s
 => [production 15/15] COPY --from=builder --chown=nextjs:nodejs /app/drizzle.config.ts ./drizzle.config.ts                                                                                                                                                                                                                                                                                                                       0.0s
 => exporting to image                                                                                                                                                                                                                                                                                                                                                                                                            6.7s
 => => exporting layers                                                                                                                                                                                                                                                                                                                                                                                                           6.7s
 => => writing image sha256:c81a450e15c2960371514efe36d4ca3e6a8afa765b57fcbeda356a0c7c389f08                                                                                                                                                                                                                                                                                                                                      0.0s
 => => naming to docker.io/library/retail-app                                                                                                                                                                                                                                                                                                                                                                                     0.0s
 => resolving provenance for metadata file                                                                                                                                                                                                                                                                                                                                                                                        0.0s
[+] Building 1/1
 ✔ retail-app  Built                                                                                                                                                                                                                                                                                                                                                                                                              0.0s
obtv-admin@retail-dev:~/retail$ docker compose up -d
[+] Running 3/3
 ✔ Network retail_default       Created                                                                                                                                                                                                                                                                                                                                                                                           0.0s
 ✔ Container retail-postgres-1  Healthy                                                                                                                                                                                                                                                                                                                                                                                          10.8s
 ✔ Container retail-app-1       Started                                                                                                                                                                                                                                                                                                                                                                                          10.9s
obtv-admin@retail-dev:~/retail$ docker compose logs -f
app-1       | 5:12:48 AM [express] serving on port 5000
postgres-1  |
postgres-1  | PostgreSQL Database directory appears to contain a database; Skipping initialization
postgres-1  |
postgres-1  | 2025-08-16 05:12:36.962 UTC [1] LOG:  starting PostgreSQL 15.14 on x86_64-pc-linux-musl, compiled by gcc (Alpine 14.2.0) 14.2.0, 64-bit
postgres-1  | 2025-08-16 05:12:36.962 UTC [1] LOG:  listening on IPv4 address "0.0.0.0", port 5432
postgres-1  | 2025-08-16 05:12:36.962 UTC [1] LOG:  listening on IPv6 address "::", port 5432
postgres-1  | 2025-08-16 05:12:36.964 UTC [1] LOG:  listening on Unix socket "/var/run/postgresql/.s.PGSQL.5432"
postgres-1  | 2025-08-16 05:12:36.967 UTC [29] LOG:  database system was shut down at 2025-08-16 05:11:43 UTC
postgres-1  | 2025-08-16 05:12:36.975 UTC [1] LOG:  database system is ready to accept connections
app-1       | Login error: ErrorEvent {
app-1       |   [Symbol(kTarget)]: WebSocket {
app-1       |     _events: [Object: null prototype] {
app-1       |       error: [Function],
app-1       |       message: [Function],
app-1       |       close: [Function],
app-1       |       open: [Function]
app-1       |     },
app-1       |     _eventsCount: 4,
app-1       |     _maxListeners: undefined,
app-1       |     _binaryType: 'arraybuffer',
app-1       |     _closeCode: 1006,
app-1       |     _closeFrameReceived: false,
app-1       |     _closeFrameSent: false,
app-1       |     _closeMessage: <Buffer >,
app-1       |     _closeTimer: null,
app-1       |     _errorEmitted: true,
app-1       |     _extensions: {},
app-1       |     _paused: false,
app-1       |     _protocol: '',
app-1       |     _readyState: 3,
app-1       |     _receiver: null,
app-1       |     _sender: null,
app-1       |     _socket: null,
app-1       |     _bufferedAmount: 0,
app-1       |     _isServer: false,
app-1       |     _redirects: 0,
app-1       |     _autoPong: true,
app-1       |     _url: 'wss://postgres/v2',
app-1       |     _req: null,
app-1       |     [Symbol(kCapture)]: false
app-1       |   },
app-1       |   [Symbol(kType)]: 'error',
app-1       |   [Symbol(kError)]: Error: connect ECONNREFUSED 172.18.0.2:443
app-1       |       at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1555:16) {
app-1       |     errno: -111,
app-1       |     code: 'ECONNREFUSED',
app-1       |     syscall: 'connect',
app-1       |     address: '172.18.0.2',
app-1       |     port: 443
app-1       |   },
app-1       |   [Symbol(kMessage)]: 'connect ECONNREFUSED 172.18.0.2:443'
app-1       | }
app-1       | 5:13:00 AM [express] POST /api/auth/login 500 in 116ms :: {"message":"Login failed"}
